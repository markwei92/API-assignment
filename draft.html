<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <style>
        #map {
            height:425px;
        }
        
        #img {
            height: 400px;
            width: 600px;
        }
        
        html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
      
      #para {
          color: red;
          font-size: 10px;
      }
      
    </style>
    <title>Hello, world!</title>
  </head>
  <body>
      <div class="container">
          
  <h2>Holiday Itinerary Planner</h2>
   </div>
  <br>
  <!-- Nav tabs -->
  <nav class="navbar navbar-expand-md bg-light navbar-dark">
  
      <button class="navbar-toggler bg-info" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
    <span class="navbar-toggler-icon"></span>
  </button>     
 
  
  
<div class="collapse navbar-collapse" id="collapsibleNavbar">
  <ul class="nav nav-tabs" role="tablist" id="navbar">
    <li class="nav-item">
      <a class="nav-link active" data-toggle="tab" href="#home">Accomodation</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" data-toggle="tab" href="#menu1">Things To Do</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" data-toggle="tab" href="#menu2">Where To Eat</a>
    </li>
     <li class="nav-item">
      <a class="nav-link" data-toggle="tab" href="#menu3">Contact Us</a>
    </li>
  </ul>
  </div>
</nav>

  <!-- Tab panes -->
  <div class="tab-content">
    <div id="home" class="container tab-pane active"><br>
      <h3>Hotels</h3>
      <p>Discover some of the best hotels or hostels depending on your budget to get the most out of your stay. Do consider the hotel's proximity to your desired attractions around the island when planning your stay.</p>
       <a class='btn btn-warning' id='hotel'>Generate Hotels</a>
      <br/>
      <br/>
      <p id="para">*Kindly use the right click function to populate your target areas as Google maps only allow displays of up to 20 results at any given time.</p>
       
       <div id='map'></div>

   </div>
   
       <div id="menu1" class="container tab-pane fade"><br>
      <h3>Sights & Attractions</h3>
      <p>Come and see what this island has to offer, with tons of activities and sightseeing in the day, followed by a vibrant nightlife. There is something for everyone  no matter young or old, search the map to start planning your activities for the day.</p>
   
    <div class="map" id='map2'></div>


    </div>
    
    
    <div id="menu2" class="container tab-pane fade"><br>
      <h3>Local Food Delights</h3>
      <p>Try our local delicacies found in the hustle and bustle of food markets and hawker centres, where the rich flavors and aromas fill the atmosphere at unbelievably cheap prices. Guaranteed not to disappoint especially if your a food lover, with a melting pot of food cultures all over asia, come experience what it means when we say we live to eat.</p>
 
  <div class="map" id='map3'></div>
       <iframe width="600" height="400" src="https://data.gov.sg/dataset/list-of-government-markets-hawker-centres/resource/8f6bba57-19fc-4f36-8dcf-c0bda382364d/view/1be4b2d5-9312-40ef-a654-e711e94d1967" frameBorder="0"> </iframe>

   </div>
    
    <div id="menu3" class="container tab-pane fade"><br>
     
      </div>
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.js" ></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <!--<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBmOu48oQBmMBEcEnofwdPKiVGKvji0zD4"></script>-->
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBmOu48oQBmMBEcEnofwdPKiVGKvji0zD4&libraries=places&callback=initMap" async defer></script>

    <script>
    
     /* global $ */
    /*global google*/
   
        var map;
        var infoWindow;
        
        var request;
        var service;
        var markers = [];
        
        
        function initMap() {
        let singapore = { lat: 1.35, lng: 103.8};
        map = new google.maps.Map(document.getElementById('map'), {
          zoom: 11,
          center: singapore,
        });
  

        
        request = {
            location: singapore,
            radius: 8047,
            types: ['hotel']
        };
        
        
        
        infoWindow = new google.maps.InfoWindow();
        
        service = new google.maps.places.PlacesService(map);
        
        service.nearbySearch(request, callback);
        
         
         
            
        /*global clearResults*/
        google.maps.event.addListener(map, 'rightclick', function(event) {
            console.log(event);
            map.setCenter(event.latLng);
            clearResults(markers);
            
            var request = {
                location: event.latLng,
                radius: 8047, 
                types: ['hotel'],
                
                fields: ['basic']
            };
            service.nearbySearch(request, callback);
            
        })
            
    
        function callback(results, status) {
            if(status == google.maps.places.PlacesServiceStatus.OK) {
                for (var i = 0; i < results.length; i++){
                    markers.push(createMarker(results[i]));
                    // createMarker(results[i]);
                }
            }
        }
        
        function createMarker(place) {
            console.log(place);
            var placeLoc = place.geometry.location;
            var marker = new google.maps.Marker({
                map: map,
                position: place.geometry.location,
                fields: ['basic', 'contact', 'atmosphere']
            });
            
            google.maps.event.addListener(marker, 'click', function() {
                // use the details service here
                console.log(place);
          
        //   service.getDetails(request, function(place, status) {
        //   if (place.rating === undefined) {
        //     var marker = new google.maps.Marker({
        //       map: map,
        //       position: place.geometry.location
        //     });
        
            let display = {};
            display.name = place.name;
            if (place.rating === undefined) {
                display.rating = 'No Available Ratings';
            } else {
                display.rating = place.rating;
            }
            
            if (place.photos === undefined) {
                display.photo = '';
                
            } else {
                display.photo = place.photos[0].getUrl()
            }
            
           
              let content = `<h3>${display.name}</h3>
                    <p><img id="img" src="${display.photo}"></p>
                    <p>Rating: ${display.rating}</p>
                    <p>Price Level: ${display.price_level}</p>`
                  
                    
            //   infoWindow.setContent(place.name);
            //   infoWindow.setContent(place.place_id);
            infoWindow.setContent(content);
                infoWindow.open(map, this);
          
            });
                   
          
            
            return marker;
            

            }
            
        // }
        
                      function clearResults(markers) {
                for (var m in markers) {
                    markers[m].setMap(null);
                }
                markers = [];
                
                      }
         }
         
  
         </script>  
    
        
    
 
      
  </body>
</html>