<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <style>
        #map {
            height:425px;
        }
        
        #img {
            height: 400px;
            width: 600px;
        }
        
        html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
      
      #para {
          color: red;
          font-size: 13px;
      }
      

      #hotels{
           text-align: center;
          background-color: rgba(250, 220, 122, 1);
      }
      
      #sights{
           text-align: center;
          background-color: rgba(251, 147, 147, 1);
      }
      
      #food{
           text-align: center;
         background-color: rgba(147, 228, 251, 1);
      }
      
      #header{
          text-align: center;
          background-color: rgba(0, 0, 0, 1);
          color: white;
          font-family: sans-serif;
      }
    </style>
    <title>Hello, world!</title>
  </head>
  <body>
      <div id="header">
          <br/>
  <h2>Holiday Itinerary Planner</h2>
   
  <br>
</div>
  <!-- Tab panes -->
  <div class="tab-content">
    <div>
        <div id="hotels">
        <br>
      <h3>Hotels</h3>
      <p id="p">Discover some of the best hotels or hostels depending on your budget to get the most out of your stay. Do consider the hotel's proximity to your desired attractions around the island when planning your stay.</p>
       <!--<input type="button" value="button1" id="button1">-->
       <!--<li class="active"><a id="button1" href="#office" data-toggle="tab">Tab 1</a>-->
       <!--<button onclick="myFunction()">Click me</button>-->
       <a class='btn btn-warning' id='button1'>Generate Hotels</a>
      <br/>
      <br/>
      <br/>
      </div>
      <div id="sights">
          <br/>
       <h3>Sights & Attractions</h3>
      <p>Come and see what this island has to offer, with tons of activities and sightseeing in the day, followed by a vibrant nightlife. There is something for everyone  no matter young or old, search the map to start planning your activities for the day.</p>
       <!--<input type="button" value="button2" id="button2">-->
       <a class='btn btn-danger' id='button2'>Generate Places To Visit</a>
    <br/>
    <br/>
    <br/>
    </div>
    <div id="food">
        <br/>
     <h3>Local Food Delights</h3>
      <p>Try our local delicacies found in the hustle and bustle of food markets and hawker centres, where the rich flavors and aromas fill the atmosphere at unbelievably cheap prices. Guaranteed not to disappoint especially if your a food lover, with a melting pot of food cultures all over asia, come experience what it means when we say we live to eat.</p>
        <a class='btn btn-info' id='button3'>Generate Eating Places</a>
        <br/>
        <br/>
        </div>
        <br/>
      <p id="para">*Kindly use the right click function to populate your target areas as Google maps only allow displays of up to 20 results for any given target area.</p>
       
       <div id='map'></div>

   </div>
   
       <div id="menu1" class="container tab-pane fade"><br>
      <h3>Sights & Attractions</h3>
      <p>Come and see what this island has to offer, with tons of activities and sightseeing in the day, followed by a vibrant nightlife. There is something for everyone  no matter young or old, search the map to start planning your activities for the day.</p>
   
  
    
    
 
 
    
    <div id="menu3" class="container tab-pane fade"><br>
     <p>hello</p>
      </div>
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.js" ></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <!--<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBmOu48oQBmMBEcEnofwdPKiVGKvji0zD4"></script>-->
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBmOu48oQBmMBEcEnofwdPKiVGKvji0zD4&libraries=places&callback=initMap" async defer></script>

    <script>
      
     /* global $ */
    /*global google*/
    /* global initialize */
    /* global infowindow */
    /* global marker */

        var map;
        var infoWindow;
        
        var request;
        var request1;
        var request2;
        var service;
        var markers = [];
        var currentSelectedMode;
        
        google.maps.event.addDomListener(window, 'load', initialize);
    
        function initMap() {
        let singapore = { lat: 1.35, lng: 103.8};
        map = new google.maps.Map(document.getElementById('map'), {
          zoom: 11,
          center: singapore,
        });
  
        function hotel(){
        infowindow.open(map,marker);
        }
        $('#button1').click(function(load){
        // google.maps.event.addDomListener(document.getElementById('button1'),
        //     'click',
            request = {
            location: singapore,
            radius: 8047,
            types: ['hotel']
            }
            
            clearResults(markers)
      
            currentSelectedMode = 'hotel';
            service.nearbySearch(request, callback);
            
            });



        // function restaurant(){
        // infowindow.open(map,marker);
        // }

        // $('#button3').click(function(load){
        // request1 = {
        // location: singapore,
        // radius: 8047,
        // types: ['restaurant']
        // }
        
        // clearResults(markers)
            
            
        // service.nearbySearch(request1, callback);
        // });

        // function museum(){
        // infowindow.open(map,marker);
        // }

        $('#button2').click(function(load){
                request2 = {
                location: singapore,
                radius: 8047,
                types: ['bank']
                }
                clearResults(markers)
            
          currentSelectedMode = 'bank';  
        service.nearbySearch(request2, callback);
        
        });
            //     );
        
        //         request4 = {
        //     location: singapore,
        //     radius: 8047,
        //     types: ['night_club']
        // };
        //         request5 = {
        //     location: singapore,
        //     radius: 8047,
        //     types: ['shopping_mall']
        // };
        
        
        infoWindow = new google.maps.InfoWindow();
        
        service = new google.maps.places.PlacesService(map);
        
        service.nearbySearch(request, callback);
        
         
         
            
        /*global clearResults*/
        // function hotel1(){
        // infowindow.open(map,marker);
        // }
        // $('#button1').click(function(load){
        
        google.maps.event.addListener(map, 'rightclick', function(event) {
            console.log(event);
            map.setCenter(event.latLng);
            clearResults(markers);

        if (currentSelectedMode == 'hotel') {
            var request = {
                location: event.latLng,
                radius: 8047, 
                types: ['hotel'],
                fields: ['basic']
            };
                service.nearbySearch(request, callback);
        }
            
        if (currentSelectedMode == 'bank') {  
            var request2 = {
                location: event.latLng,
                radius: 8047, 
                types: ['bank'],
                fields: ['basic']
            };
            service.nearbySearch(request2, callback);
        }
        })
        

                
            
            
        // google.maps.event.addListener(map, 'rightclick', function(event) {
        //     console.log(event);
        //     map.setCenter(event.latLng);
        //     clearResults(markers);     
        //     var request1 = {
        //         location: event.latLng,
        //         radius: 8047, 
        //         types: ['museum'],
                
        //         fields: ['basic']
        //     };
        //     service.nearbySearch(request1, callback);
            
        // })
            
        // google.maps.event.addListener(map, 'rightclick', function(event) {
        //     console.log(event);
        //     map.setCenter(event.latLng);
        //     clearResults(markers);     
        //     var request2 = {
        //         location: event.latLng,
        //         radius: 8047, 
        //         types: ['museum'],
                
        //         fields: ['basic']
        //     };
        //     service.nearbySearch(request2, callback);
            
        // })
            //     var request2 = {
            //     location: event.latLng,
            //     radius: 8047, 
            //     types: ['cafe'],
                
            //     fields: ['basic']
            // };
            
            //     var request3 = {
            //     location: event.latLng,
            //     radius: 8047, 
            //     types: ['museum'],
                
            //     fields: ['basic']
            // };
            
            //     var request4 = {
            //     location: event.latLng,
            //     radius: 8047, 
            //     types: ['night_club'],
                
            //     fields: ['basic']
            // };
            
            //     var request5 = {
            //     location: event.latLng,
            //     radius: 8047, 
            //     types: ['shopping_mall'],
                
            //     fields: ['basic']
            // };
            

            
    
        function callback(results, status) {
            if(status == google.maps.places.PlacesServiceStatus.OK) {
                for (var i = 0; i < results.length; i++){
                    markers.push(createMarker(results[i]));
                    // createMarker(results[i]);
                }
            }
        }
        
        function createMarker(place) {
            console.log(place);
            var placeLoc = place.geometry.location;
            var marker = new google.maps.Marker({
                map: map,
                position: place.geometry.location,
                fields: ['basic', 'contact', 'atmosphere']
            });
            
            google.maps.event.addListener(marker, 'click', function() {
                // use the details service here
                console.log(place);

        // Display on click of marker
        
            let display = {};
            display.name = place.name;
            if (place.rating === undefined) {
                display.rating = 'No Available Ratings';
            } else {
                display.rating = place.rating;
            }
            
            if (place.photos === undefined) {
                display.photo = 'No Available';
                
            } else {
                display.photo = place.photos[0].getUrl()
            }
            
            if (place.price_level === undefined) {
                display.price_level = 'No Available Pricing';
            } else{
                display.price_level = place.price_level;
            }
           
              let content = `<h3>${display.name}</h3>
                    <p><img id="img" src="${display.photo}"></p>
                    <p>Rating: ${display.rating}</p>
                    <p>Price Level: ${display.price_level}</p>`
                  
                    
            //   infoWindow.setContent(place.name);
            //   infoWindow.setContent(place.place_id);
            infoWindow.setContent(content);
                infoWindow.open(map, this);
          
            });
                   
          
            
            return marker;
            

            }
            
        // }
        
                      function clearResults(markers) {
                for (var m in markers) {
                    markers[m].setMap(null);
                }
                markers = [];
                
                      }
         }
   

        // }
    // Javascript button functionality

    </script>  
    
        
    
 
      
  </body>
</html>